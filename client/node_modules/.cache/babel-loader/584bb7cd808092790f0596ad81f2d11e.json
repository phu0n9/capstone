{"ast":null,"code":"/*\nCopyright (c) 2019 Daybrush\nname: @scena/ruler\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/ruler.git\nversion: 0.8.0\n*/\nimport { ref, Properties } from 'framework-utils';\nimport { createPortal, createElement, Component, render } from 'react-simple-compat';\nimport ReactRuler, { PROPERTIES as PROPERTIES$1, METHODS as METHODS$1 } from 'react-compat-ruler';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nvar PROPERTIES = PROPERTIES$1;\nvar METHODS = METHODS$1;\n\nvar InnerRuler = /*#__PURE__*/function (_super) {\n  __extends(InnerRuler, _super);\n\n  function InnerRuler(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {};\n    _this.state = _this.props;\n    return _this;\n  }\n\n  var __proto = InnerRuler.prototype;\n\n  __proto.render = function () {\n    var _a = this.state,\n        parentElement = _a.parentElement,\n        state = __rest(_a, [\"parentElement\"]);\n\n    return createPortal(createElement(ReactRuler, __assign({\n      ref: ref(this, \"ruler\")\n    }, state)), parentElement);\n  };\n\n  return InnerRuler;\n}(Component);\n/**\n * A Ruler component that can draw grids and scroll infinitely.\n * @sort 1\n * @implements Ruler.RulerInterface\n */\n\n\nvar Ruler = /*#__PURE__*/function () {\n  /**\n   * @param - container\n   * @param {$ts:Partial<Ruler.RulerProps>} options - options\n   */\n  function Ruler(parentElement, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.tempElement = document.createElement(\"div\");\n    render(createElement(InnerRuler, __assign({\n      ref: ref(this, \"innerRuler\")\n    }, options, {\n      parentElement: parentElement\n    })), this.tempElement);\n  }\n\n  var __proto = Ruler.prototype;\n\n  __proto.scroll = function (scrollPos) {\n    this.getRuler().scroll(scrollPos);\n  };\n\n  __proto.resize = function () {\n    this.getRuler().resize();\n  };\n  /**\n   * Remove Ruler\n   */\n\n\n  __proto.destroy = function () {\n    render(null, this.tempElement);\n    this.tempElement = null;\n    this.innerRuler = null;\n  };\n\n  __proto.getRuler = function () {\n    return this.innerRuler.ruler;\n  };\n\n  Ruler = __decorate([Properties(PROPERTIES, function (prototype, property) {\n    Object.defineProperty(prototype, property, {\n      get: function () {\n        return this.getRuler().props[property];\n      },\n      set: function (value) {\n        var _a;\n\n        this.innerRuler.setState((_a = {}, _a[property] = value, _a));\n      },\n      enumerable: true,\n      configurable: true\n    });\n  })], Ruler);\n  return Ruler;\n}();\n\nexport default Ruler;\nexport { METHODS, PROPERTIES };","map":{"version":3,"sources":["../src/consts.ts","../src/InnerRuler.tsx","../src/Ruler.tsx"],"names":["PROPERTIES","RULER_PROPERTIES","METHODS","RULER_METHODS","__extends","_this","_super","_a","parentElement","state","createPortal","ref","Properties","Object","get","set","value","enumerable","configurable","Ruler","document","options","render"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMaA,UAAU,GAA4BC,Y;AACnD,IAAaC,OAAO,GAAgCC,SAApD;;ACDA,IAAA,UAAA,G;AAAwCC,EAAAA,SAAAA,CAAAA,UAAAA,EAAAA,MAAAA,CAAAA;;WAGpC,U,CAAA,K,EAAA;gBACIE,MAAAA,CAAAA,IAAAA,CAAAA,IAAAA,EAAAA,KAAAA,KADJ,I;;AAFOD,IAAAA,KAAAA,CAAAA,KAAAA,GAAAA,EAAAA;AAIHA,IAAAA,KAAI,CAAJA,KAAAA,GAAaA,KAAI,CAAjBA,KAAAA;;;;;;UAEG,M,GAAP,YAAA;QACUE,EAAAA,GAAAA,KAAN,K;QAAQC,aAAAA,GAAAA,EAAAA,CAAR,a;QAAuBC,KAAAA,GAAAA,MAAAA,CAAAA,EAAAA,EAAAA,CAAvB,eAAuBA,CAAAA,C;;WAEhBC,YAAY,CAAC,aAAA,CAAA,UAAA,EAAA,QAAA,CAAA;AAAYC,MAAAA,GAAG,EAAEA,GAAG,CAAA,IAAA,EAAA,OAAA;AAApB,KAAA,EAAD,KAAC,CAAA,CAAD,EAAnB,aAAmB,C;AAHhB,G;;SAKX,U;EAZA,S,CAAA;ACEA;;;;;;;AAmBA,IAAA,KAAA,G;;;;;WAOI,K,CAAA,a,EAAA,O,EAAA;yBAAwCU,C,EAAAA;AAAAA,MAAAA,OAAAA,GAAAA,EAAAA;;;SANhC,W,GAAcD,QAAQ,CAARA,aAAAA,CAAd,KAAcA,C;AAOlBE,IAAAA,MAAM,CACF,aAAA,CAAA,UAAA,EAAA,QAAA,CAAA;AAAYX,MAAAA,GAAG,EAAEA,GAAG,CAAA,IAAA,EAAA,YAAA;AAApB,KAAA,EACQU,OADR,EACQA;AAASb,MAAAA,aAAa,EAAEA;AAAxBa,KADR,CAAA,CADE,EAGF,KAHJC,WAAM,CAANA;;;;;UAMG,M,GAAP,UAAA,SAAA,EAAA;SACI,Q,GAAA,M,CAAA,S;AADG,G;;UAGA,M,GAAP,YAAA;SACI,Q,GAAA,M;AADG,G;;;;;;UAMA,O,GAAP,YAAA;AACIA,IAAAA,MAAM,CAAA,IAAA,EAAO,KAAbA,WAAM,CAANA;SACA,W,GAAA,I;SACA,U,GAAA,I;AAHG,G;;UAKC,Q,GAAR,YAAA;WACW,KAAA,UAAA,CAAP,K;AADI,G;;AA5BNH,EAAAA,KAAK,GAAA,UAAA,CAAA,CAdVP,UAAU,CAAA,UAAA,EAAa,UAAA,SAAA,EAAA,QAAA,EAAA;AACpBC,IAAAA,MAAM,CAANA,cAAAA,CAAAA,SAAAA,EAAAA,QAAAA,EAA2C;AACvCC,MAAAA,GAAG,EAAA,YAAA;eACQ,KAAA,QAAA,GAAA,KAAA,CAAP,QAAO,C;AAF4B,OAAA;AAIvCC,MAAAA,GAAG,EAAA,UAACC,KAAD,EAACA;;;aACA,U,CAAA,Q,EAAA,EAAA,GAAA,EAAA,EACIT,EAAAA,CAAAA,QAAAA,CAAAA,GAAYS,KADhB,EAAA,E;AALmC,OAAA;AASvCC,MAAAA,UAAU,EAT6B,IAAA;AAUvCC,MAAAA,YAAY,EAAE;AAVyB,KAA3CL;AADO,GAAA,CAcA,CAAA,EAALM,KAAK,CAALA;SA+BN,K;AA/BA,C,EAAA","sourcesContent":["import { RulerProps, RulerInterface } from \"@scena/react-ruler/declaration/types\";\nimport {\n    PROPERTIES as RULER_PROPERTIES,\n    METHODS as RULER_METHODS,\n} from \"@scena/react-ruler\";\n\nexport const PROPERTIES: Array<keyof RulerProps> = RULER_PROPERTIES;\nexport const METHODS: Array<keyof RulerInterface> = RULER_METHODS;\n","import * as React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ref } from \"framework-utils\";\nimport ReactRuler from \"@scena/react-ruler\";\nimport { InnerRulerProps } from \"./types\";\n\nexport default class InnerRuler extends React.Component<InnerRulerProps, InnerRulerProps> {\n    public state: InnerRulerProps = {};\n    public ruler: ReactRuler;\n    constructor(props: InnerRulerProps) {\n        super(props);\n        this.state = this.props;\n    }\n    public render() {\n        const { parentElement, ...state } = this.state;\n\n        return createPortal(<ReactRuler ref={ref(this, \"ruler\")} {...state} />, parentElement);\n    }\n}\n","import { ref, Properties } from \"framework-utils\";\nimport * as React from \"react\";\nimport { render } from \"react-dom\";\nimport { PROPERTIES } from \"./consts\";\nimport { RulerInterface, RulerProps } from \"@scena/react-ruler/declaration/types\";\nimport InnerRuler from \"./InnerRuler\";\n\n\n/**\n * A Ruler component that can draw grids and scroll infinitely.\n * @sort 1\n * @implements Ruler.RulerInterface\n */\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getRuler().props[property];\n        },\n        set(value) {\n            this.innerRuler.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\nclass Ruler implements RulerInterface {\n    private tempElement = document.createElement(\"div\");\n    private innerRuler!: InnerRuler;\n    /**\n     * @param - container\n     * @param {$ts:Partial<Ruler.RulerProps>} options - options\n     */\n    constructor(parentElement: HTMLElement, options: Partial<RulerProps> = {}) {\n        render(\n            <InnerRuler ref={ref(this, \"innerRuler\")}\n                {...options} parentElement={parentElement} />,\n            this.tempElement,\n        );\n    }\n    public scroll(scrollPos: number) {\n        this.getRuler().scroll(scrollPos);\n    }\n    public resize() {\n        this.getRuler().resize();\n    }\n    /**\n     * Remove Ruler\n     */\n    public destroy() {\n        render(null, this.tempElement);\n        this.tempElement = null;\n        this.innerRuler = null;\n    }\n    private getRuler() {\n        return this.innerRuler.ruler;\n    }\n}\n\nexport default Ruler;\n"]},"metadata":{},"sourceType":"module"}