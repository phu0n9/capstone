{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\capstone\\\\schaeffler\\\\client\\\\src\\\\HomepageRightBody.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Mapping from './Mapping';\nimport ControlBox from './ControlBox';\nimport PictureGallery from './PictureGallery';\nimport Queue from './Components/Queue';\nimport ReactNotification from 'react-notifications-component';\nimport { store } from 'react-notifications-component';\nimport 'react-notifications-component/dist/theme.css';\nimport Pusher from 'pusher-js';\nimport { Steps } from \"intro.js-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function RightBody({\n  setClickGallery,\n  clickGallery,\n  setQueueOnClick,\n  queueOnClick,\n  setStepsEnabled,\n  stepsEnabled\n}) {\n  _s();\n\n  const [buttonSubmit, setButtonSubmit] = useState(false);\n  const [droneConnection, setDroneConnection] = useState(false);\n  const [carConnection, setCarConnection] = useState(false);\n  const [available, setAvailable] = useState(undefined);\n  const [executeOnClick, setExecuteOnClick] = useState(false);\n  const [rowDes, setRowDes] = useState(0);\n  const [rackDes, setRackDes] = useState(0);\n  const [checkRack, setCheckRack] = useState(undefined);\n  const [droneStatus, setDroneStatus] = useState(\"\");\n  const [scanned, setScanned] = useState(false);\n  const [rowClick, setRowClick] = useState(undefined);\n  const [rackClick, setRackClick] = useState(undefined);\n  const [keyword, setKeyword] = useState(undefined); //Intro js\n\n  const initialStep = 0;\n  const steps = [{\n    element: \".header\",\n    intro: \"Welcome to Schaeffler Inventory Checking.\"\n  }, {\n    element: \".search-sidebar\",\n    intro: \"Search your item here. Example: 5.6.7 where 5 is rack,6 is column,7 is row.\"\n  }, {\n    element: \".status-wrapper\",\n    intro: \"Remember to check the device before submit.\"\n  }, {\n    element: \".mapping\",\n    intro: \"Click to location to see existing search in the map.\"\n  }, {\n    element: \"#picture-gallery\",\n    intro: \"Existing picture would be shown here.\"\n  }, {\n    element: \"#queue-command\",\n    intro: \"List of item command when device is not online would be shown here.\"\n  }, {\n    element: \".bx-user\",\n    intro: \"User profile\"\n  }, {\n    element: \".support-btn\",\n    intro: \"End of tour.Click this to start the tour again.\"\n  }];\n  useEffect(() => {\n    const pusher = new Pusher(process.env.REACT_APP_PUSHER_KEY, {\n      'cluster': process.env.REACT_APP_PUSHER_CLUSTER,\n      forceTLS: true\n    });\n    const carMessage = pusher.subscribe('carMessage');\n    carMessage.bind('send', function (data) {\n      setCarConnection(JSON.parse(data.carConnection));\n    });\n    const droneMessage = pusher.subscribe('droneMessage');\n    droneMessage.bind('send', function (data) {\n      setDroneConnection(JSON.parse(data.droneConnection));\n    });\n    const availableMessage = pusher.subscribe('availability');\n    availableMessage.bind('keyword', function (data) {\n      setAvailable(JSON.parse(data));\n    });\n    const statusChannel = pusher.subscribe('status');\n    statusChannel.bind('rack', function (data) {\n      setCheckRack(JSON.parse(data));\n    });\n    statusChannel.bind('land', function (data) {\n      setDroneStatus(data.landingStatus);\n    });\n    const offlineChannel = pusher.subscribe('message');\n    offlineChannel.bind('connection', function (data) {\n      setCarConnection(data);\n      setDroneConnection(data);\n    });\n    const scanChannel = pusher.subscribe('status');\n    scanChannel.bind('search', function (data) {\n      setScanned(JSON.parse(data));\n    });\n    return () => {\n      pusher.unsubscribe(carMessage);\n      pusher.unsubscribe(droneMessage);\n      pusher.unsubscribe(availableMessage);\n      pusher.unsubscribe(statusChannel);\n      pusher.unsubscribe(offlineChannel);\n      pusher.unsubscribe(scanChannel);\n      pusher.disconnect();\n    };\n  }, []);\n\n  function getNotification(title, message, messageType, duration, width) {\n    store.addNotification({\n      title: title,\n      message: message,\n      type: messageType,\n      container: \"bottom-right\",\n      insert: \"bottom\",\n      animationIn: [\"animated\", \"fadeIn\"],\n      animationOut: [\"animated\", \"fadeOut\"],\n      dismiss: {\n        duration: duration,\n        onScreen: true\n      },\n      width: width\n    });\n  }\n\n  useEffect(() => {\n    if (buttonSubmit === true && carConnection === false && droneConnection === false) {\n      getNotification(\"Warning\", \"Device is not online but your search will be saved.\", \"warning\", 10000, 500);\n      setQueueOnClick(true);\n    } else if (droneConnection && carConnection) {\n      getNotification(\"Device Status\", \"Car and Drone are online\", \"success\", 5000, 400);\n    }\n  }, [buttonSubmit, carConnection, droneConnection, setQueueOnClick]);\n  useEffect(() => {\n    if (available === false && executeOnClick) {\n      getNotification(\"Device Status\", \"Process are being executed. Try again later!\", \"danger\", 7000, 400);\n      setExecuteOnClick(false);\n    } else if (available === undefined && executeOnClick) {\n      getNotification(\"Device Status\", \"Make sure to turn on the device.\", \"danger\", 5000, 400);\n      setExecuteOnClick(false);\n    } else if (available === true && carConnection && droneConnection) {\n      getNotification(\"Device Status\", \"Search can be performed now.\", \"success\", 5000, 400);\n    } else if (checkRack === false) {\n      getNotification(\"Result\", \"You have placed device at the wrong rack.\", \"danger\", 10000, 400);\n      setCheckRack(undefined);\n    } else if (droneStatus !== \"\") {\n      getNotification(\"Drone status\", \"Drone is \" + droneStatus, \"info\", 10000, 400);\n    } else if (droneStatus === \"landed\") {\n      setDroneStatus(\"\");\n      setRackDes(0);\n      setRowDes(0);\n    } else if (scanned) {\n      getNotification(\"Device status\", \"Drone went to right position\", \"success\", 10000, 400);\n    }\n\n    console.log(\"available \" + available);\n  }, [available, executeOnClick, checkRack, droneStatus, droneConnection, carConnection, scanned]);\n\n  const handleOnExit = () => {\n    setStepsEnabled(false);\n  };\n\n  useEffect(() => {\n    if (rowClick && rackClick) {\n      setClickGallery(true);\n      setKeyword(rackClick + \".\" + rowClick);\n    }\n  }, [rowClick, rackClick, setClickGallery]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ControlBox, {\n      buttonSubmit: buttonSubmit,\n      setButtonSubmit: setButtonSubmit,\n      droneConnection: droneConnection,\n      carConnection: carConnection,\n      setQueueOnClick: setQueueOnClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Mapping, {\n      rowDes: rowDes,\n      rackDes: rackDes,\n      available: available,\n      setRowClick: setRowClick,\n      setRackClick: setRackClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, this), clickGallery ? /*#__PURE__*/_jsxDEV(PictureGallery, {\n      setClickGallery: setClickGallery,\n      setRackClick: setRackClick,\n      setRowClick: setRowClick,\n      keyword: keyword,\n      setKeyword: setKeyword\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 29\n    }, this) : \"\", queueOnClick ? /*#__PURE__*/_jsxDEV(Queue, {\n      setQueueOnClick: setQueueOnClick,\n      available: available,\n      setExecuteOnClick: setExecuteOnClick,\n      setRackDes: setRackDes,\n      setRowDes: setRowDes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 29\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(ReactNotification, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Steps, {\n      enabled: stepsEnabled,\n      steps: steps,\n      initialStep: initialStep,\n      onExit: handleOnExit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(RightBody, \"ZtShfgApJfj8g+7GgzffnPr6tRs=\");\n\n_c = RightBody;\n\nvar _c;\n\n$RefreshReg$(_c, \"RightBody\");","map":{"version":3,"sources":["C:/Users/Admin/Downloads/capstone/schaeffler/client/src/HomepageRightBody.js"],"names":["React","useState","useEffect","Mapping","ControlBox","PictureGallery","Queue","ReactNotification","store","Pusher","Steps","RightBody","setClickGallery","clickGallery","setQueueOnClick","queueOnClick","setStepsEnabled","stepsEnabled","buttonSubmit","setButtonSubmit","droneConnection","setDroneConnection","carConnection","setCarConnection","available","setAvailable","undefined","executeOnClick","setExecuteOnClick","rowDes","setRowDes","rackDes","setRackDes","checkRack","setCheckRack","droneStatus","setDroneStatus","scanned","setScanned","rowClick","setRowClick","rackClick","setRackClick","keyword","setKeyword","initialStep","steps","element","intro","pusher","process","env","REACT_APP_PUSHER_KEY","REACT_APP_PUSHER_CLUSTER","forceTLS","carMessage","subscribe","bind","data","JSON","parse","droneMessage","availableMessage","statusChannel","landingStatus","offlineChannel","scanChannel","unsubscribe","disconnect","getNotification","title","message","messageType","duration","width","addNotification","type","container","insert","animationIn","animationOut","dismiss","onScreen","console","log","handleOnExit"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport Mapping from './Mapping'\r\nimport ControlBox from './ControlBox'\r\nimport PictureGallery from './PictureGallery'\r\nimport Queue from './Components/Queue'\r\nimport ReactNotification from 'react-notifications-component'\r\nimport {store} from 'react-notifications-component'\r\nimport 'react-notifications-component/dist/theme.css'\r\nimport Pusher from 'pusher-js'\r\nimport { Steps } from \"intro.js-react\";\r\n\r\nexport default function RightBody({setClickGallery,clickGallery,setQueueOnClick,queueOnClick,setStepsEnabled,stepsEnabled}) {\r\n    const [buttonSubmit,setButtonSubmit] = useState(false)\r\n    const [droneConnection,setDroneConnection] = useState(false)\r\n    const [carConnection,setCarConnection] = useState(false)\r\n    const [available,setAvailable] = useState(undefined)\r\n    const [executeOnClick,setExecuteOnClick] = useState(false)\r\n    const [rowDes,setRowDes] = useState(0)\r\n    const [rackDes,setRackDes] = useState(0)\r\n    const [checkRack,setCheckRack] = useState(undefined)\r\n    const [droneStatus,setDroneStatus] = useState(\"\")\r\n    const [scanned,setScanned] = useState(false)\r\n    const [rowClick,setRowClick] = useState(undefined)\r\n    const [rackClick,setRackClick] = useState(undefined)\r\n    const [keyword,setKeyword] = useState(undefined)\r\n\r\n    //Intro js\r\n    const initialStep = 0\r\n    const steps = ([{\r\n            element: \".header\",\r\n            intro: \"Welcome to Schaeffler Inventory Checking.\"\r\n          },\r\n          {\r\n            element: \".search-sidebar\",\r\n            intro: \"Search your item here. Example: 5.6.7 where 5 is rack,6 is column,7 is row.\"\r\n          },\r\n          {\r\n            element: \".status-wrapper\",\r\n            intro: \"Remember to check the device before submit.\"\r\n          },\r\n          {\r\n            element: \".mapping\",\r\n            intro: \"Click to location to see existing search in the map.\"\r\n          },\r\n          {\r\n            element: \"#picture-gallery\",\r\n            intro: \"Existing picture would be shown here.\"\r\n          },\r\n          {\r\n            element: \"#queue-command\",\r\n            intro: \"List of item command when device is not online would be shown here.\"\r\n          },\r\n          {\r\n            element: \".bx-user\",\r\n            intro: \"User profile\"\r\n          },\r\n          {\r\n              element: \".support-btn\",\r\n              intro: \"End of tour.Click this to start the tour again.\"\r\n          }\r\n    ])\r\n\r\n    useEffect(() =>{\r\n        const pusher = new Pusher(process.env.REACT_APP_PUSHER_KEY,{\r\n            'cluster':process.env.REACT_APP_PUSHER_CLUSTER,\r\n            forceTLS: true,\r\n        })\r\n\r\n        const carMessage  = pusher.subscribe('carMessage')\r\n        carMessage.bind('send',function(data){\r\n            setCarConnection(JSON.parse(data.carConnection))\r\n        })\r\n        const droneMessage  = pusher.subscribe('droneMessage')\r\n        droneMessage.bind('send',function(data){\r\n            setDroneConnection(JSON.parse(data.droneConnection))\r\n        })\r\n\r\n        const availableMessage  = pusher.subscribe('availability')\r\n        availableMessage.bind('keyword',function(data){\r\n            setAvailable(JSON.parse(data))\r\n        })\r\n\r\n        const statusChannel = pusher.subscribe('status')\r\n        statusChannel.bind('rack',function(data){\r\n            setCheckRack(JSON.parse(data))\r\n        })\r\n\r\n        statusChannel.bind('land',function(data){\r\n            setDroneStatus(data.landingStatus)\r\n        })\r\n\r\n        const offlineChannel = pusher.subscribe('message')\r\n        offlineChannel.bind('connection',function(data){\r\n            setCarConnection(data)\r\n            setDroneConnection(data)\r\n        })\r\n\r\n        const scanChannel = pusher.subscribe('status')\r\n        scanChannel.bind('search',function(data){\r\n            setScanned(JSON.parse(data))\r\n        })\r\n\r\n        return () => {\r\n            pusher.unsubscribe(carMessage)\r\n            pusher.unsubscribe(droneMessage)\r\n            pusher.unsubscribe(availableMessage)\r\n            pusher.unsubscribe(statusChannel)\r\n            pusher.unsubscribe(offlineChannel)\r\n            pusher.unsubscribe(scanChannel)\r\n            pusher.disconnect()\r\n        }\r\n    },[])\r\n\r\n    function getNotification(title,message,messageType,duration,width){\r\n        store.addNotification({\r\n            title:title,\r\n            message:message,\r\n            type: messageType,\r\n            container:\"bottom-right\",\r\n            insert:\"bottom\",\r\n            animationIn:[\"animated\",\"fadeIn\"],\r\n            animationOut:[\"animated\",\"fadeOut\"],\r\n            dismiss: {\r\n                duration: duration,\r\n                onScreen: true\r\n            },\r\n            width:width\r\n        })              \r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(buttonSubmit === true && carConnection === false && droneConnection === false){\r\n            getNotification(\"Warning\",\"Device is not online but your search will be saved.\",\"warning\",10000,500)\r\n            setQueueOnClick(true)\r\n        }\r\n        else if(droneConnection && carConnection){\r\n            getNotification(\"Device Status\",\"Car and Drone are online\",\"success\",5000,400)       \r\n        }\r\n    },[buttonSubmit,carConnection,droneConnection,setQueueOnClick])\r\n\r\n    useEffect(() =>{\r\n        if(available === false && executeOnClick){\r\n            getNotification(\"Device Status\",\"Process are being executed. Try again later!\",\"danger\",7000,400)      \r\n            setExecuteOnClick(false) \r\n        }\r\n        else if(available === undefined && executeOnClick){\r\n            getNotification(\"Device Status\",\"Make sure to turn on the device.\",\"danger\",5000,400)      \r\n            setExecuteOnClick(false) \r\n        }\r\n        else if(available === true && carConnection && droneConnection){\r\n            getNotification(\"Device Status\",\"Search can be performed now.\",\"success\",5000,400)       \r\n        }\r\n        else if(checkRack === false){\r\n            getNotification(\"Result\",\"You have placed device at the wrong rack.\",\"danger\",10000,400) \r\n            setCheckRack(undefined)      \r\n        }\r\n        else if(droneStatus !== \"\"){\r\n            getNotification(\"Drone status\",\"Drone is \"+droneStatus,\"info\",10000,400)       \r\n        }\r\n        else if(droneStatus === \"landed\"){\r\n            setDroneStatus(\"\")\r\n            setRackDes(0)\r\n            setRowDes(0)\r\n        }\r\n        else if(scanned){\r\n            getNotification(\"Device status\",\"Drone went to right position\",\"success\",10000,400)       \r\n        }\r\n        console.log(\"available \"+available)\r\n    },[available,executeOnClick,checkRack,droneStatus,droneConnection,carConnection,scanned])\r\n\r\n    const handleOnExit = () => {\r\n        setStepsEnabled(false)\r\n    }\r\n\r\n    useEffect(() =>{\r\n        if(rowClick && rackClick){\r\n            setClickGallery(true)\r\n            setKeyword(rackClick+\".\"+rowClick)\r\n        }\r\n    },[rowClick,rackClick,setClickGallery])\r\n\r\n    return (\r\n        <>\r\n            <ControlBox buttonSubmit={buttonSubmit} setButtonSubmit={setButtonSubmit} droneConnection={droneConnection} carConnection={carConnection} setQueueOnClick={setQueueOnClick}/>\r\n            <Mapping rowDes={rowDes} rackDes={rackDes} available={available} setRowClick={setRowClick} setRackClick={setRackClick}/>\r\n            {clickGallery ? <PictureGallery setClickGallery={setClickGallery} setRackClick={setRackClick} setRowClick={setRowClick} keyword={keyword} setKeyword={setKeyword}/>: \"\"}\r\n            {queueOnClick ? <Queue setQueueOnClick={setQueueOnClick} available={available} setExecuteOnClick={setExecuteOnClick} setRackDes={setRackDes} setRowDes={setRowDes}/>: \"\"}\r\n            <ReactNotification/>\r\n            <Steps\r\n            enabled={stepsEnabled}\r\n            steps={steps}\r\n            initialStep={initialStep}\r\n            onExit={handleOnExit}\r\n            />\r\n        </>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}