{"ast":null,"code":"/*\nCopyright (c) 2019 Daybrush\nname: react-compat-ruler\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/ruler/blob/master/packages/react-compat-ruler\nversion: 0.7.1\n*/\nimport { createElement, PureComponent } from 'react-simple-compat';\nimport { ref } from 'framework-utils';\nimport { convertUnitSize } from '@daybrush/utils';\n/*\nCopyright (c) 2019 Daybrush\nname: @scena/react-ruler\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/ruler/blob/master/packages/react-ruler\nversion: 0.8.1\n*/\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar Ruler = /*#__PURE__*/function (_super) {\n  __extends(Ruler, _super);\n\n  function Ruler() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      scrollPos: 0\n    };\n    _this.width = 0;\n    _this.height = 0;\n    return _this;\n  }\n\n  var __proto = Ruler.prototype;\n\n  __proto.render = function () {\n    return createElement(\"canvas\", {\n      ref: ref(this, \"canvasElement\"),\n      style: this.props.style\n    });\n  };\n\n  __proto.componentDidMount = function () {\n    var canvas = this.canvasElement;\n    var context = canvas.getContext(\"2d\");\n    this.canvasContext = context;\n    this.resize();\n  };\n\n  __proto.componentDidUpdate = function () {\n    this.resize();\n  };\n  /**\n   * @method Ruler#scroll\n   * @param scrollPos\n   */\n\n\n  __proto.scroll = function (scrollPos) {\n    this.draw(scrollPos);\n  };\n  /**\n   * @method Ruler#resize\n   */\n\n\n  __proto.resize = function () {\n    var canvas = this.canvasElement;\n    var _a = this.props,\n        width = _a.width,\n        height = _a.height,\n        scrollPos = _a.scrollPos;\n    this.width = width || canvas.offsetWidth;\n    this.height = height || canvas.offsetHeight;\n    canvas.width = this.width * 2;\n    canvas.height = this.height * 2;\n    this.draw(scrollPos);\n  };\n\n  __proto.draw = function (scrollPos) {\n    if (scrollPos === void 0) {\n      scrollPos = this.state.scrollPos;\n    }\n\n    var props = this.props;\n    var _a = props,\n        unit = _a.unit,\n        zoom = _a.zoom,\n        type = _a.type,\n        backgroundColor = _a.backgroundColor,\n        lineColor = _a.lineColor,\n        textColor = _a.textColor,\n        direction = _a.direction,\n        _b = _a.negativeRuler,\n        negativeRuler = _b === void 0 ? true : _b,\n        _c = _a.segment,\n        segment = _c === void 0 ? 10 : _c,\n        textFormat = _a.textFormat;\n    var width = this.width;\n    var height = this.height;\n    var state = this.state;\n    state.scrollPos = scrollPos;\n    var context = this.canvasContext;\n    var isHorizontal = type === \"horizontal\";\n    var isDirectionStart = direction === \"start\";\n    var isNegative = negativeRuler !== false;\n    var font = props.font || \"10px sans-serif\";\n    var textAlign = props.textAlign || \"left\";\n    var textOffset = props.textOffset || [0, 0];\n    var containerSize = isHorizontal ? height : width;\n    var mainLineSize = convertUnitSize(\"\" + (props.mainLineSize || \"100%\"), containerSize);\n    var longLineSize = convertUnitSize(\"\" + (props.longLineSize || 10), containerSize);\n    var shortLineSize = convertUnitSize(\"\" + (props.shortLineSize || 7), containerSize);\n\n    if (backgroundColor === \"transparent\") {\n      // Clear existing paths & text\n      context.clearRect(0, 0, width * 2, height * 2);\n    } else {\n      // Draw the background\n      context.rect(0, 0, width * 2, height * 2);\n      context.fillStyle = backgroundColor;\n      context.fill();\n    }\n\n    context.save();\n    context.scale(2, 2);\n    context.strokeStyle = lineColor;\n    context.lineWidth = 1;\n    context.font = font;\n    context.fillStyle = textColor;\n\n    if (isDirectionStart) {\n      context.textBaseline = \"top\";\n    }\n\n    context.translate(0.5, 0);\n    context.beginPath();\n    var size = isHorizontal ? width : height;\n    var zoomUnit = zoom * unit;\n    var minRange = Math.floor(scrollPos * zoom / zoomUnit);\n    var maxRange = Math.ceil((scrollPos * zoom + size) / zoomUnit);\n    var length = maxRange - minRange;\n    var alignOffset = Math.max([\"left\", \"center\", \"right\"].indexOf(textAlign) - 1, -1);\n\n    for (var i = 0; i <= length; ++i) {\n      var value = i + minRange;\n\n      if (!isNegative && value < 0) {\n        continue;\n      }\n\n      var startPos = (value * unit - scrollPos) * zoom;\n\n      for (var j = 0; j < segment; ++j) {\n        var pos = startPos + j / segment * zoomUnit;\n\n        if (pos < 0 || pos >= size) {\n          continue;\n        }\n\n        var lineSize = j === 0 ? mainLineSize : j % 2 === 0 ? longLineSize : shortLineSize;\n\n        var _d = isHorizontal ? [pos, isDirectionStart ? 0 : height - lineSize] : [isDirectionStart ? 0 : width - lineSize, pos],\n            x1 = _d[0],\n            y1 = _d[1];\n\n        var _e = isHorizontal ? [x1, y1 + lineSize] : [x1 + lineSize, y1],\n            x2 = _e[0],\n            y2 = _e[1];\n\n        context.moveTo(x1, y1);\n        context.lineTo(x2, y2);\n      }\n\n      if (startPos >= -zoomUnit && startPos < size + unit * zoom) {\n        var _f = isHorizontal ? [startPos + alignOffset * -3, isDirectionStart ? 17 : height - 17] : [isDirectionStart ? 17 : width - 17, startPos + alignOffset * 3],\n            startX = _f[0],\n            startY = _f[1];\n\n        var text = \"\" + value * unit;\n\n        if (textFormat) {\n          text = textFormat(value * unit);\n        }\n\n        context.textAlign = textAlign;\n\n        if (isHorizontal) {\n          context.fillText(text, startX + textOffset[0], startY + textOffset[1]);\n        } else {\n          context.save();\n          context.translate(startX + textOffset[0], startY + textOffset[1]);\n          context.rotate(-Math.PI / 2);\n          context.fillText(text, 0, 0);\n          context.restore();\n        }\n      }\n    }\n\n    context.stroke();\n    context.restore();\n  };\n\n  Ruler.defaultProps = {\n    type: \"horizontal\",\n    zoom: 1,\n    width: 0,\n    height: 0,\n    unit: 50,\n    negativeRuler: true,\n    mainLineSize: \"100%\",\n    longLineSize: 10,\n    shortLineSize: 7,\n    segment: 10,\n    direction: \"end\",\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    backgroundColor: \"#333333\",\n    font: \"10px sans-serif\",\n    textColor: \"#ffffff\",\n    lineColor: \"#777777\"\n  };\n  return Ruler;\n}(PureComponent);\n\nvar PROPERTIES = [\"type\", \"width\", \"height\", \"unit\", \"zoom\", \"style\", \"backgroundColor\", \"lineColor\", \"textColor\", \"direction\", \"textFormat\", \"scrollPos\", \"textAlign\", \"mainLineSize\", \"longLineSize\", \"shortLineSize\", \"negativeRuler\", \"textOffset\", \"font\", \"segment\"];\nvar METHODS = [\"scroll\", \"resize\"];\nexport default Ruler;\nexport { METHODS, PROPERTIES };","map":{"version":3,"sources":["C:/Users/Admin/Downloads/capstone/schaeffler/client/node_modules/react-compat-ruler/dist/ruler.esm.js"],"names":["createElement","PureComponent","ref","convertUnitSize","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","Ruler","_super","_this","apply","arguments","state","scrollPos","width","height","__proto","render","style","props","componentDidMount","canvas","canvasElement","context","getContext","canvasContext","resize","componentDidUpdate","scroll","draw","_a","offsetWidth","offsetHeight","unit","zoom","type","backgroundColor","lineColor","textColor","direction","_b","negativeRuler","_c","segment","textFormat","isHorizontal","isDirectionStart","isNegative","font","textAlign","textOffset","containerSize","mainLineSize","longLineSize","shortLineSize","clearRect","rect","fillStyle","fill","save","scale","strokeStyle","lineWidth","textBaseline","translate","beginPath","size","zoomUnit","minRange","Math","floor","maxRange","ceil","length","alignOffset","max","indexOf","i","value","startPos","j","pos","lineSize","_d","x1","y1","_e","x2","y2","moveTo","lineTo","_f","startX","startY","text","fillText","rotate","PI","restore","stroke","defaultProps","PROPERTIES","METHODS"],"mappings":"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","sourcesContent":["/*\nCopyright (c) 2019 Daybrush\nname: react-compat-ruler\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/ruler/blob/master/packages/react-compat-ruler\nversion: 0.7.1\n*/\nimport { createElement, PureComponent } from 'react-simple-compat';\nimport { ref } from 'framework-utils';\nimport { convertUnitSize } from '@daybrush/utils';\n\n/*\nCopyright (c) 2019 Daybrush\nname: @scena/react-ruler\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/ruler/blob/master/packages/react-ruler\nversion: 0.8.1\n*/\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar Ruler =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Ruler, _super);\n\n  function Ruler() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      scrollPos: 0\n    };\n    _this.width = 0;\n    _this.height = 0;\n    return _this;\n  }\n\n  var __proto = Ruler.prototype;\n\n  __proto.render = function () {\n    return createElement(\"canvas\", {\n      ref: ref(this, \"canvasElement\"),\n      style: this.props.style\n    });\n  };\n\n  __proto.componentDidMount = function () {\n    var canvas = this.canvasElement;\n    var context = canvas.getContext(\"2d\");\n    this.canvasContext = context;\n    this.resize();\n  };\n\n  __proto.componentDidUpdate = function () {\n    this.resize();\n  };\n  /**\n   * @method Ruler#scroll\n   * @param scrollPos\n   */\n\n\n  __proto.scroll = function (scrollPos) {\n    this.draw(scrollPos);\n  };\n  /**\n   * @method Ruler#resize\n   */\n\n\n  __proto.resize = function () {\n    var canvas = this.canvasElement;\n    var _a = this.props,\n        width = _a.width,\n        height = _a.height,\n        scrollPos = _a.scrollPos;\n    this.width = width || canvas.offsetWidth;\n    this.height = height || canvas.offsetHeight;\n    canvas.width = this.width * 2;\n    canvas.height = this.height * 2;\n    this.draw(scrollPos);\n  };\n\n  __proto.draw = function (scrollPos) {\n    if (scrollPos === void 0) {\n      scrollPos = this.state.scrollPos;\n    }\n\n    var props = this.props;\n    var _a = props,\n        unit = _a.unit,\n        zoom = _a.zoom,\n        type = _a.type,\n        backgroundColor = _a.backgroundColor,\n        lineColor = _a.lineColor,\n        textColor = _a.textColor,\n        direction = _a.direction,\n        _b = _a.negativeRuler,\n        negativeRuler = _b === void 0 ? true : _b,\n        _c = _a.segment,\n        segment = _c === void 0 ? 10 : _c,\n        textFormat = _a.textFormat;\n    var width = this.width;\n    var height = this.height;\n    var state = this.state;\n    state.scrollPos = scrollPos;\n    var context = this.canvasContext;\n    var isHorizontal = type === \"horizontal\";\n    var isDirectionStart = direction === \"start\";\n    var isNegative = negativeRuler !== false;\n    var font = props.font || \"10px sans-serif\";\n    var textAlign = props.textAlign || \"left\";\n    var textOffset = props.textOffset || [0, 0];\n    var containerSize = isHorizontal ? height : width;\n    var mainLineSize = convertUnitSize(\"\" + (props.mainLineSize || \"100%\"), containerSize);\n    var longLineSize = convertUnitSize(\"\" + (props.longLineSize || 10), containerSize);\n    var shortLineSize = convertUnitSize(\"\" + (props.shortLineSize || 7), containerSize);\n\n    if (backgroundColor === \"transparent\") {\n      // Clear existing paths & text\n      context.clearRect(0, 0, width * 2, height * 2);\n    } else {\n      // Draw the background\n      context.rect(0, 0, width * 2, height * 2);\n      context.fillStyle = backgroundColor;\n      context.fill();\n    }\n\n    context.save();\n    context.scale(2, 2);\n    context.strokeStyle = lineColor;\n    context.lineWidth = 1;\n    context.font = font;\n    context.fillStyle = textColor;\n\n    if (isDirectionStart) {\n      context.textBaseline = \"top\";\n    }\n\n    context.translate(0.5, 0);\n    context.beginPath();\n    var size = isHorizontal ? width : height;\n    var zoomUnit = zoom * unit;\n    var minRange = Math.floor(scrollPos * zoom / zoomUnit);\n    var maxRange = Math.ceil((scrollPos * zoom + size) / zoomUnit);\n    var length = maxRange - minRange;\n    var alignOffset = Math.max([\"left\", \"center\", \"right\"].indexOf(textAlign) - 1, -1);\n\n    for (var i = 0; i <= length; ++i) {\n      var value = i + minRange;\n\n      if (!isNegative && value < 0) {\n        continue;\n      }\n\n      var startPos = (value * unit - scrollPos) * zoom;\n\n      for (var j = 0; j < segment; ++j) {\n        var pos = startPos + j / segment * zoomUnit;\n\n        if (pos < 0 || pos >= size) {\n          continue;\n        }\n\n        var lineSize = j === 0 ? mainLineSize : j % 2 === 0 ? longLineSize : shortLineSize;\n\n        var _d = isHorizontal ? [pos, isDirectionStart ? 0 : height - lineSize] : [isDirectionStart ? 0 : width - lineSize, pos],\n            x1 = _d[0],\n            y1 = _d[1];\n\n        var _e = isHorizontal ? [x1, y1 + lineSize] : [x1 + lineSize, y1],\n            x2 = _e[0],\n            y2 = _e[1];\n\n        context.moveTo(x1, y1);\n        context.lineTo(x2, y2);\n      }\n\n      if (startPos >= -zoomUnit && startPos < size + unit * zoom) {\n        var _f = isHorizontal ? [startPos + alignOffset * -3, isDirectionStart ? 17 : height - 17] : [isDirectionStart ? 17 : width - 17, startPos + alignOffset * 3],\n            startX = _f[0],\n            startY = _f[1];\n\n        var text = \"\" + value * unit;\n\n        if (textFormat) {\n          text = textFormat(value * unit);\n        }\n\n        context.textAlign = textAlign;\n\n        if (isHorizontal) {\n          context.fillText(text, startX + textOffset[0], startY + textOffset[1]);\n        } else {\n          context.save();\n          context.translate(startX + textOffset[0], startY + textOffset[1]);\n          context.rotate(-Math.PI / 2);\n          context.fillText(text, 0, 0);\n          context.restore();\n        }\n      }\n    }\n\n    context.stroke();\n    context.restore();\n  };\n\n  Ruler.defaultProps = {\n    type: \"horizontal\",\n    zoom: 1,\n    width: 0,\n    height: 0,\n    unit: 50,\n    negativeRuler: true,\n    mainLineSize: \"100%\",\n    longLineSize: 10,\n    shortLineSize: 7,\n    segment: 10,\n    direction: \"end\",\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    backgroundColor: \"#333333\",\n    font: \"10px sans-serif\",\n    textColor: \"#ffffff\",\n    lineColor: \"#777777\"\n  };\n  return Ruler;\n}(PureComponent);\n\nvar PROPERTIES = [\"type\", \"width\", \"height\", \"unit\", \"zoom\", \"style\", \"backgroundColor\", \"lineColor\", \"textColor\", \"direction\", \"textFormat\", \"scrollPos\", \"textAlign\", \"mainLineSize\", \"longLineSize\", \"shortLineSize\", \"negativeRuler\", \"textOffset\", \"font\", \"segment\"];\nvar METHODS = [\"scroll\", \"resize\"];\n\nexport default Ruler;\nexport { METHODS, PROPERTIES };\n"]},"metadata":{},"sourceType":"module"}