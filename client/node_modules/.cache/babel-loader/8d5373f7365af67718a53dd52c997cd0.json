{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Pusher from 'pusher-js';\n\nrequire('dotenv').config();\n\nexport default function PopUp() {\n  _s();\n\n  const [queue, setQueue] = useState([]);\n  const [error, setError] = useState(false);\n  const heroku = 'https://schaeffler.herokuapp.com/queue';\n  const pusher = new Pusher(process.env.REACT_APP_PUSHER_KEY, {\n    'cluster': process.env.REACT_APP_PUSHER_CLUSTER,\n    encrypted: true\n  }); // 'http://localhost:5000/queue'\n\n  function getQueue() {\n    setError(false);\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/queue'\n    }).then(res => {\n      setQueue(prevInventory => {\n        return [...new Set([...prevInventory, ...res.data.map(i => i)])];\n      });\n    }).catch(e => {\n      setError(true);\n      console.log('Error: ' + e);\n    });\n  }\n\n  useEffect(() => getQueue(), []);\n\n  function fetchChanges() {\n    setError(false);\n    axios({\n      method: 'GET',\n      url: heroku\n    }).then(res => {\n      setQueue(() => {\n        return [...new Set([...'', ...res.data.map(i => i)])];\n      });\n    }).catch(e => {\n      setError(true);\n      console.log('Error: ' + e);\n    });\n  }\n\n  useEffect(() => {\n    const channel = pusher.subscribe('tasks');\n    channel.bind('deleted', function () {\n      fetchChanges();\n    });\n    channel.bind('inserted', function () {\n      fetchChanges();\n    });\n    return () => channel.unbind();\n  }, []);\n  useEffect(() => {\n    const channel = pusher.subscribe('armarker');\n  }, []);\n  return {\n    queue,\n    error\n  };\n}\n\n_s(PopUp, \"wo99kalp18To+zF4nkVvkyDprVk=\");\n\n_c = PopUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"PopUp\");","map":{"version":3,"sources":["C:/Users/Admin/Downloads/capstone/schaeffler/client/src/PopUp.js"],"names":["useState","useEffect","axios","Pusher","require","config","PopUp","queue","setQueue","error","setError","heroku","pusher","process","env","REACT_APP_PUSHER_KEY","REACT_APP_PUSHER_CLUSTER","encrypted","getQueue","method","url","then","res","prevInventory","Set","data","map","i","catch","e","console","log","fetchChanges","channel","subscribe","bind","unbind"],"mappings":";;AAAA,SAAQA,QAAR,EAAiBC,SAAjB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEA,eAAe,SAASC,KAAT,GAAiB;AAAA;;AAE5B,QAAM,CAACC,KAAD,EAAOC,QAAP,IAAmBR,QAAQ,CAAC,EAAD,CAAjC;AACA,QAAM,CAACS,KAAD,EAAOC,QAAP,IAAmBV,QAAQ,CAAC,KAAD,CAAjC;AACA,QAAMW,MAAM,GAAG,wCAAf;AACA,QAAMC,MAAM,GAAG,IAAIT,MAAJ,CAAWU,OAAO,CAACC,GAAR,CAAYC,oBAAvB,EAA4C;AACvD,eAAUF,OAAO,CAACC,GAAR,CAAYE,wBADiC;AAEvDC,IAAAA,SAAS,EAAC;AAF6C,GAA5C,CAAf,CAL4B,CAS5B;;AACA,WAASC,QAAT,GAAmB;AACfR,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACAR,IAAAA,KAAK,CAAC;AACFiB,MAAAA,MAAM,EAAC,KADL;AAEFC,MAAAA,GAAG,EAAE;AAFH,KAAD,CAAL,CAICC,IAJD,CAIMC,GAAG,IAAI;AACTd,MAAAA,QAAQ,CAACe,aAAa,IAAG;AACrB,eAAO,CAAC,GAAG,IAAIC,GAAJ,CAAQ,CAAC,GAAGD,aAAJ,EAAkB,GAAGD,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAaC,CAAC,IAAIA,CAAlB,CAArB,CAAR,CAAJ,CAAP;AACH,OAFO,CAAR;AAGH,KARD,EASCC,KATD,CASOC,CAAC,IAAG;AACPnB,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAUF,CAAtB;AACH,KAZD;AAaH;;AACD5B,EAAAA,SAAS,CAAC,MAAMiB,QAAQ,EAAf,EAAkB,EAAlB,CAAT;;AAEA,WAASc,YAAT,GAAuB;AACnBtB,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACIR,IAAAA,KAAK,CAAC;AACFiB,MAAAA,MAAM,EAAC,KADL;AAEFC,MAAAA,GAAG,EAAET;AAFH,KAAD,CAAL,CAICU,IAJD,CAIMC,GAAG,IAAI;AACTd,MAAAA,QAAQ,CAAC,MAAK;AACV,eAAO,CAAC,GAAG,IAAIgB,GAAJ,CAAQ,CAAC,GAAG,EAAJ,EAAO,GAAGF,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAaC,CAAC,IAAIA,CAAlB,CAAV,CAAR,CAAJ,CAAP;AACH,OAFO,CAAR;AAGH,KARD,EASCC,KATD,CASOC,CAAC,IAAG;AACPnB,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAUF,CAAtB;AACH,KAZD;AAaP;;AAED5B,EAAAA,SAAS,CAAC,MAAK;AAEX,UAAMgC,OAAO,GAAGrB,MAAM,CAACsB,SAAP,CAAiB,OAAjB,CAAhB;AACAD,IAAAA,OAAO,CAACE,IAAR,CAAa,SAAb,EAAuB,YAAU;AAC7BH,MAAAA,YAAY;AACf,KAFD;AAGAC,IAAAA,OAAO,CAACE,IAAR,CAAa,UAAb,EAAwB,YAAU;AAC9BH,MAAAA,YAAY;AACf,KAFD;AAGA,WAAO,MAAMC,OAAO,CAACG,MAAR,EAAb;AACH,GAVQ,EAUP,EAVO,CAAT;AAYAnC,EAAAA,SAAS,CAAC,MAAK;AACX,UAAMgC,OAAO,GAAGrB,MAAM,CAACsB,SAAP,CAAiB,UAAjB,CAAhB;AACH,GAFQ,EAEP,EAFO,CAAT;AAIA,SAAO;AAAC3B,IAAAA,KAAD;AAAOE,IAAAA;AAAP,GAAP;AACH;;GA9DuBH,K;;KAAAA,K","sourcesContent":["import {useState,useEffect} from 'react'\r\nimport axios from 'axios'\r\nimport Pusher from 'pusher-js'\r\nrequire('dotenv').config()\r\n\r\nexport default function PopUp() {\r\n\r\n    const [queue,setQueue] = useState([])\r\n    const [error,setError] = useState(false)\r\n    const heroku = 'https://schaeffler.herokuapp.com/queue'\r\n    const pusher = new Pusher(process.env.REACT_APP_PUSHER_KEY,{\r\n        'cluster':process.env.REACT_APP_PUSHER_CLUSTER,\r\n        encrypted:true\r\n    })\r\n    // 'http://localhost:5000/queue'\r\n    function getQueue(){\r\n        setError(false)\r\n        axios({\r\n            method:'GET',\r\n            url: 'http://localhost:5000/queue',\r\n        })\r\n        .then(res => {\r\n            setQueue(prevInventory =>{\r\n                return [...new Set([...prevInventory,...res.data.map(i => i)])]\r\n            })\r\n        })\r\n        .catch(e =>{\r\n            setError(true)\r\n            console.log('Error: '+e)\r\n        })\r\n    }\r\n    useEffect(() => getQueue(),[])\r\n\r\n    function fetchChanges(){\r\n        setError(false)\r\n            axios({\r\n                method:'GET',\r\n                url: heroku,\r\n            })\r\n            .then(res => {\r\n                setQueue(() =>{\r\n                    return [...new Set([...'',...res.data.map(i => i)])]\r\n                })\r\n            })\r\n            .catch(e =>{\r\n                setError(true)\r\n                console.log('Error: '+e)\r\n            })\r\n    }\r\n\r\n    useEffect(() =>{\r\n        \r\n        const channel = pusher.subscribe('tasks')\r\n        channel.bind('deleted',function(){\r\n            fetchChanges()\r\n        })\r\n        channel.bind('inserted',function(){\r\n            fetchChanges()\r\n        })\r\n        return () => channel.unbind()\r\n    },[])\r\n\r\n    useEffect(() =>{\r\n        const channel = pusher.subscribe('armarker',)\r\n    },[])\r\n\r\n    return {queue,error}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}