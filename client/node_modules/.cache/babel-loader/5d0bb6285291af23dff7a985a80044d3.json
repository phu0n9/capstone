{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\capstone\\\\schaeffler\\\\client\\\\src\\\\Components\\\\Queue.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef } from 'react';\nimport popUp from '../PopUp';\nimport axios from 'axios';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Queue({\n  setQueueOnClick,\n  available,\n  setExecuteOnClick,\n  setRackDes,\n  setRowDes\n}) {\n  _s();\n\n  const observer = useRef();\n  const {\n    isAuthenticated,\n    getAccessTokenSilently\n  } = useAuth0();\n  const heroku = 'https://schaeffler.herokuapp.com/';\n\n  const handleCloseButton = () => {\n    setQueueOnClick(false);\n  };\n\n  const {\n    queue,\n    error,\n    loading\n  } = popUp();\n  const lastItem = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect(); // observer.current = new IntersectionObserver(entries =>{\n    //     if(entries[0].isIntersecting && hasMore) \n    // setPageNumber(prevInventory => prevInventory + 5)\n    // })\n\n    if (node) observer.current.observe(node);\n  }, [loading]);\n\n  function getPosition(string, subString, index) {\n    return string.split(subString, index).join(subString).length;\n  }\n\n  const handleExecuteItem = async e => {\n    const token = await getAccessTokenSilently();\n    setExecuteOnClick(true);\n\n    if (isAuthenticated && available) {\n      const url = `http://localhost:5000/queue/execute/${e.target.value}`; //change here\n      // const url = heroku+`queue/execute/${e.target.value}` //change here\n\n      await axios.get(url, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }).then(res => {\n        setExecuteOnClick(false);\n        console.log(\"rack \" + res.data.substring(0, res.data.indexOf(\".\")));\n        console.log(\"row \" + res.data.substring(res.data.indexOf(\".\"), getPosition(res.data, \".\", 2)));\n        setRackDes(res.data.substring(0, res.data.indexOf(\".\")));\n        setRowDes(res.data.substring(res.data.indexOf(\".\") + 1, getPosition(res.data, \".\", 2)));\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  };\n\n  const handleCancelItem = async e => {\n    if (isAuthenticated) {\n      const token = await getAccessTokenSilently();\n      const url = `http://localhost:5000/queue/delete/${e.target.value}`; //change here\n      // const url = heroku+`queue/delete/${e.target.value}`//change here\n\n      await axios.delete(url, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"queue-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"close-btn\",\n      onClick: handleCloseButton,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"close.png\",\n        alt: \"close\",\n        className: \"close-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 71\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"queue-slider\",\n      children: [queue.map((item, index) => {\n        if (item.length === index + 1) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"queue-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              ref: lastItem,\n              className: \"keyword-label\",\n              children: [\"Search location: \", item.keyword]\n            }, item.keyword, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"cancel-item-btn\",\n              onClick: handleCancelItem,\n              value: item._id,\n              ref: lastItem,\n              children: \"DELETE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"execute-item-btn\",\n              onClick: handleExecuteItem,\n              value: item._id,\n              ref: lastItem,\n              children: \"EXECUTE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 28\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"queue-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"keyword-label\",\n              children: [\"Search location: \", item.keyword]\n            }, (index + 1).toString(), true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleCancelItem,\n              className: \"cancel-item-btn\",\n              value: item._id,\n              children: \"DELETE\"\n            }, (index + 3).toString(), false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleExecuteItem,\n              className: \"execute-item-btn\",\n              value: item._id,\n              children: \"EXECUTE\"\n            }, (index + 4).toString(), false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 25\n            }, this)]\n          }, index.toString(), true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 28\n          }, this);\n        }\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: loading && 'Loading...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: error && 'Error'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Queue, \"o9tkAqN98sVMS3rxoRbFPY5kvU8=\", false, function () {\n  return [useAuth0];\n});\n\n_c = Queue;\n\nvar _c;\n\n$RefreshReg$(_c, \"Queue\");","map":{"version":3,"sources":["C:/Users/Admin/Downloads/capstone/schaeffler/client/src/Components/Queue.js"],"names":["React","useCallback","useRef","popUp","axios","useAuth0","Queue","setQueueOnClick","available","setExecuteOnClick","setRackDes","setRowDes","observer","isAuthenticated","getAccessTokenSilently","heroku","handleCloseButton","queue","error","loading","lastItem","node","current","disconnect","observe","getPosition","string","subString","index","split","join","length","handleExecuteItem","e","token","url","target","value","get","headers","authorization","then","res","console","log","data","substring","indexOf","catch","handleCancelItem","delete","map","item","keyword","_id","toString"],"mappings":"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","sourcesContent":["import React,{useCallback,useRef} from 'react'\r\nimport popUp from '../PopUp'\r\nimport axios from 'axios'\r\nimport {useAuth0} from '@auth0/auth0-react'\r\n\r\nexport default function Queue({setQueueOnClick,available,setExecuteOnClick,setRackDes,setRowDes}) {\r\n    const observer = useRef()\r\n    const {isAuthenticated,getAccessTokenSilently} = useAuth0()\r\n\r\n    const heroku = 'https://schaeffler.herokuapp.com/'\r\n\r\n    const handleCloseButton = () => {\r\n        setQueueOnClick(false)\r\n    }\r\n\r\n    const {\r\n        queue,\r\n        error,\r\n        loading\r\n    } = popUp()\r\n\r\n    const lastItem= useCallback((node) =>{\r\n        if(loading) return\r\n        if(observer.current) observer.current.disconnect()\r\n        // observer.current = new IntersectionObserver(entries =>{\r\n        //     if(entries[0].isIntersecting && hasMore) \r\n        // setPageNumber(prevInventory => prevInventory + 5)\r\n        // })\r\n        if(node) observer.current.observe(node)\r\n    },[loading])\r\n\r\n    function getPosition(string, subString, index) {\r\n        return string.split(subString, index).join(subString).length;\r\n    }\r\n \r\n    const handleExecuteItem = (async (e)=>{\r\n        const token = await getAccessTokenSilently()\r\n        setExecuteOnClick(true)\r\n        if(isAuthenticated && available){\r\n            const url = `http://localhost:5000/queue/execute/${e.target.value}` //change here\r\n            // const url = heroku+`queue/execute/${e.target.value}` //change here\r\n            await axios.get(url,{\r\n                headers: {\r\n                    authorization: `Bearer ${token}`\r\n                }\r\n            })\r\n            .then((res)=>{ \r\n                setExecuteOnClick(false)\r\n                console.log(\"rack \"+res.data.substring(0,res.data.indexOf(\".\")))\r\n                console.log(\"row \"+res.data.substring(res.data.indexOf(\".\"),getPosition(res.data,\".\",2)))\r\n                setRackDes(res.data.substring(0,res.data.indexOf(\".\")))\r\n                setRowDes(res.data.substring(res.data.indexOf(\".\") + 1,getPosition(res.data,\".\",2)))\r\n            })\r\n            .catch(error=> {console.log(error)})    \r\n        }\r\n    })\r\n\r\n    const handleCancelItem = (async (e)=>{\r\n        if(isAuthenticated){\r\n            const token = await getAccessTokenSilently()\r\n            const url = `http://localhost:5000/queue/delete/${e.target.value}`//change here\r\n            // const url = heroku+`queue/delete/${e.target.value}`//change here\r\n            await axios.delete(url,{\r\n                headers: {\r\n                    authorization: `Bearer ${token}`\r\n                }\r\n            })\r\n            .catch(error=> {console.log(error)})    \r\n        }\r\n    })\r\n\r\n    return (\r\n        <div className=\"queue-wrapper\">\r\n            <button className=\"close-btn\" onClick={handleCloseButton}><img src=\"close.png\" alt=\"close\" className=\"close-icon\"/></button>\r\n            <div className=\"queue-slider\">\r\n            {queue.map((item,index)=>{\r\n                if(item.length === index +1){\r\n                    return <div className=\"queue-item\">\r\n                        <p key={item.keyword} ref={lastItem} className=\"keyword-label\">Search location: {item.keyword}</p>\r\n                        <button type=\"button\" className=\"cancel-item-btn\" onClick={handleCancelItem} value={item._id} ref={lastItem}>DELETE</button>\r\n                        <button type=\"button\" className=\"execute-item-btn\" onClick={handleExecuteItem}value={item._id} ref={lastItem}>EXECUTE</button>\r\n                    </div>\r\n                }\r\n                else{\r\n                    return <div className=\"queue-item\" key={(index).toString()}>\r\n                        <p key={(index+1).toString()} className=\"keyword-label\">Search location: {item.keyword}</p>\r\n                        <button key={(index+3).toString()} type=\"button\" onClick={handleCancelItem} className=\"cancel-item-btn\" value={item._id}>DELETE</button>\r\n                        <button key={(index+4).toString()} type=\"button\" onClick={handleExecuteItem} className=\"execute-item-btn\" value={item._id}>EXECUTE</button>\r\n                    </div>\r\n                }\r\n            })}\r\n            <div>{loading && 'Loading...'}</div>\r\n            <div>{error && 'Error'}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}