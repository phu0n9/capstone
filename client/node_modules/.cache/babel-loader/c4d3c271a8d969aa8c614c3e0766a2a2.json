{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nexport default function InfinityScroll(pageNumber) {\n  _s();\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [inventory, setInventory] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  const [socket, setSocket] = useState();\n  useEffect(() => {\n    const s = io(`http://localhost:5000`);\n    setSocket(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    const handle = () => {\n      console.log(delta);\n    };\n\n    socket.on('sending', handle);\n  }, [socket]);\n  useEffect(() => {\n    setLoading(true);\n    setError(false);\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/inventory',\n      params: {\n        page: pageNumber\n      }\n    }).then(res => {\n      setInventory(prevInventory => {\n        return [...new Set([...prevInventory, ...res.data.map(i => i)])];\n      });\n      setHasMore(res.data.length > 0);\n      setLoading(false);\n    }).catch(e => {\n      setError(true);\n      console.log('Error: ' + e);\n    });\n  }, [pageNumber]);\n  return {\n    loading,\n    hasMore,\n    error,\n    inventory\n  };\n}\n\n_s(InfinityScroll, \"bEg/f76xNSIjgNVqeh2HBvDgpcc=\");\n\n_c = InfinityScroll;\n\nvar _c;\n\n$RefreshReg$(_c, \"InfinityScroll\");","map":{"version":3,"sources":["C:/Users/Admin/Downloads/capstone/schaeffler/client/src/InfinityScroll.js"],"names":["React","useEffect","useState","axios","io","InfinityScroll","pageNumber","loading","setLoading","error","setError","inventory","setInventory","hasMore","setHasMore","socket","setSocket","s","disconnect","handle","console","log","delta","on","method","url","params","page","then","res","prevInventory","Set","data","map","i","length","catch","e"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,EAAR,QAAiB,kBAAjB;AAEA,eAAe,SAASC,cAAT,CAAwBC,UAAxB,EAAoC;AAAA;;AAC/C,QAAM,CAACC,OAAD,EAASC,UAAT,IAAuBN,QAAQ,CAAC,IAAD,CAArC;AACA,QAAM,CAACO,KAAD,EAAOC,QAAP,IAAmBR,QAAQ,CAAC,KAAD,CAAjC;AACA,QAAM,CAACS,SAAD,EAAWC,YAAX,IAA2BV,QAAQ,CAAC,EAAD,CAAzC;AACA,QAAM,CAACW,OAAD,EAASC,UAAT,IAAuBZ,QAAQ,CAAC,KAAD,CAArC;AACA,QAAM,CAACa,MAAD,EAAQC,SAAR,IAAqBd,QAAQ,EAAnC;AAGAD,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMgB,CAAC,GAAGb,EAAE,CAAE,uBAAF,CAAZ;AACAY,IAAAA,SAAS,CAACC,CAAD,CAAT;AACA,WAAO,MAAK;AACRA,MAAAA,CAAC,CAACC,UAAF;AACH,KAFD;AAGH,GANQ,EAMN,EANM,CAAT;AAQAjB,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMkB,MAAM,GAAG,MAAK;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACH,KAFD;;AAGAP,IAAAA,MAAM,CAACQ,EAAP,CAAU,SAAV,EAAoBJ,MAApB;AACH,GALQ,EAKN,CAACJ,MAAD,CALM,CAAT;AAOAd,EAAAA,SAAS,CAAC,MAAK;AACXO,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAE,IAAAA,QAAQ,CAAC,KAAD,CAAR;AAEAP,IAAAA,KAAK,CAAC;AACFqB,MAAAA,MAAM,EAAC,KADL;AAEFC,MAAAA,GAAG,EAAE,iCAFH;AAGFC,MAAAA,MAAM,EAAC;AAACC,QAAAA,IAAI,EAACrB;AAAN;AAHL,KAAD,CAAL,CAKCsB,IALD,CAKMC,GAAG,IAAI;AACTjB,MAAAA,YAAY,CAACkB,aAAa,IAAG;AACzB,eAAO,CAAC,GAAG,IAAIC,GAAJ,CAAQ,CAAC,GAAGD,aAAJ,EAAkB,GAAGD,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAaC,CAAC,IAAIA,CAAlB,CAArB,CAAR,CAAJ,CAAP;AACH,OAFW,CAAZ;AAGApB,MAAAA,UAAU,CAACe,GAAG,CAACG,IAAJ,CAASG,MAAT,GAAkB,CAAnB,CAAV;AACA3B,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAXD,EAYC4B,KAZD,CAYOC,CAAC,IAAG;AACP3B,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAU,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAUgB,CAAtB;AACH,KAfD;AAgBH,GApBQ,EAoBP,CAAC/B,UAAD,CApBO,CAAT;AAqBA,SAAO;AAACC,IAAAA,OAAD;AAASM,IAAAA,OAAT;AAAiBJ,IAAAA,KAAjB;AAAuBE,IAAAA;AAAvB,GAAP;AACH;;GA7CuBN,c;;KAAAA,c","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport axios from 'axios'\r\nimport {io} from 'socket.io-client'\r\n\r\nexport default function InfinityScroll(pageNumber) {\r\n    const [loading,setLoading] = useState(true)\r\n    const [error,setError] = useState(false)\r\n    const [inventory,setInventory] = useState([])\r\n    const [hasMore,setHasMore] = useState(false)\r\n    const [socket,setSocket] = useState()\r\n\r\n\r\n    useEffect(() => {\r\n        const s = io(`http://localhost:5000`)\r\n        setSocket(s)\r\n        return () =>{\r\n            s.disconnect()  \r\n        }\r\n    }, []) \r\n\r\n    useEffect(() => {\r\n        const handle = () =>{\r\n            console.log(delta)\r\n        }\r\n        socket.on('sending',handle)\r\n    }, [socket])\r\n\r\n    useEffect(() =>{\r\n        setLoading(true)\r\n        setError(false)\r\n\r\n        axios({\r\n            method:'GET',\r\n            url: 'http://localhost:5000/inventory',\r\n            params:{page:pageNumber}\r\n        })\r\n        .then(res => {\r\n            setInventory(prevInventory =>{\r\n                return [...new Set([...prevInventory,...res.data.map(i => i)])]\r\n            })\r\n            setHasMore(res.data.length > 0)\r\n            setLoading(false)\r\n        })\r\n        .catch(e =>{\r\n            setError(true)\r\n            console.log('Error: '+e)\r\n        })\r\n    },[pageNumber])\r\n    return {loading,hasMore,error,inventory}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}